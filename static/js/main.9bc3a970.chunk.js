(this.webpackJsonpmemeapp=this.webpackJsonpmemeapp||[]).push([[0],{45:function(e,t,a){e.exports=a(57)},50:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),l=a(9),r=a.n(l),i=(a(50),a(39)),c=a(80),s=a(86),d=a(82),m=a(83),u=a(85),h=Object(c.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,color:"white"}}}));var g=function(){var e=h(),t=Object(n.useState)(!1),a=Object(i.a)(t,2),l=a[0],r=a[1];return o.a.createElement(s.a,{position:"static",className:"inverted-theme"},o.a.createElement(d.a,null,o.a.createElement(u.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"}),o.a.createElement(m.a,{variant:"h6",className:e.title},o.a.createElement("img",{className:"inverted inverted-theme",src:"https://upload.wikimedia.org/wikipedia/en/9/9a/Trollface_non-free.png",alt:"Problem?",height:"50px",width:"50px"})),o.a.createElement(m.a,{variant:"h5",className:e.title},o.a.createElement("p",null,"Memeify")),o.a.createElement(m.a,{variant:"h6"},o.a.createElement("label",{className:"theme-switch",htmlFor:"checkbox"},o.a.createElement("input",{type:"checkbox",id:"checkbox",onChange:function(e){var t=document.querySelectorAll(".inverted");document.body.classList.toggle("inverted-theme"),t.forEach((function(e){return e.classList.toggle("inverted-theme")})),r(!l)}}),o.a.createElement("div",{className:"slider round"})))))},v=a(31),f=a(20),p=a(35),x=a(36),b=a(28),C=a(40),E=a(38),w=a(84),y=a(29),T=function(e){e.preventDefault();var t=document.getElementById("my-canvas").toDataURL("image/jpeg"),a=new Image;a.crossOrigin="anonymous",a.href=t;var n=document.createElement("a");n.download="meme.jpeg",n.href=t,n.click()};var F=function(e){var t=this,a=e.state.texts;return o.a.createElement("form",{className:"meme-form",onSubmit:e.handleSubmit},a.map((function(a){return o.a.createElement("div",{key:10*a.id},o.a.createElement("input",{className:"input",key:a.id,type:"text",name:a.text,placeholder:"Funny text goes here....",value:a.text,onChange:e.handleTextChange.bind(t,a.id)}),o.a.createElement(w.a,{title:"Text Color",placement:"top-start",arrow:!0},o.a.createElement("input",{className:"colorPicker inverted",type:"color",name:"bottomColor",value:a.color,onChange:e.handleColorChange.bind(t,a.id)})),o.a.createElement(w.a,{title:"Border Color",placement:"top-start",arrow:!0},o.a.createElement("input",{className:"colorPicker inverted",type:"color",name:"bottomBorderColor",value:a.borderColor,onChange:e.handleBorderColorChange.bind(t,a.id)})),o.a.createElement("input",{className:"input textSize",type:"number",name:a.size,placeholder:"Size",value:a.size,onChange:e.handleTextSizeChange.bind(t,a.id)}))})),o.a.createElement("div",{className:"input-control"},o.a.createElement("button",{id:"remove ",className:"inverted button",onClick:e.handleRemoveText},"-"),o.a.createElement("button",{id:"add",className:"inverted button",onClick:e.handleAddText},"+")),o.a.createElement("button",{type:"submit",onClick:e.handleRandomMemeClick,className:"inverted button"},o.a.createElement(y.MdShuffle,null)," Random"),o.a.createElement("button",{type:"submit",onClick:T,className:"inverted button"},o.a.createElement(y.MdFileDownload,null)," download"),o.a.createElement("button",{className:"cutom-file-upload inverted button",type:"button",onClick:function(){document.getElementById("file-upload").click()}}," ",o.a.createElement(y.MdFileUpload,null)," Upload"),o.a.createElement("input",{id:"file-upload",type:"file",onChange:e.handleFileChange}))};var k=function(e){return o.a.createElement("div",{className:"meme"},o.a.createElement("center",null,o.a.createElement("canvas",{id:"my-canvas",className:"inverted",width:"568px",height:"335px"})))},M=function(e,t,a){var n=t,o=e;t>a&&(o=e*(a/t),n=a);return{newheight:n,newwidth:o}},I=function(e){Object(C.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).getPos=function(e){for(var t=0,a=0;null!=e;)t+=e.offsetLeft,a+=e.offsetTop,e=e.offsetParent;return{x:t,y:a}},e.textHittest=function(t,a,n){var o=e.state.texts[n];return t>=o.x&&t<=o.x+o.width&&a>=o.y-o.height&&a<=o.y},e.handleMouseDown=function(t){var a,n,o;console.log(e.state.texts),t.preventDefault();var l=e.state,r=l.texts,i=l.canvas;n=(a=e.getPos(i)).x,o=a.y,e.startX=parseInt(t.clientX-n),e.startY=parseInt(t.clientY-o);for(var c=0;c<r.length;c++)e.textHittest(e.startX,e.startY,c)&&(e.selectedText=c)},e.handleMouseMove=function(t){t.preventDefault();var a,n,o,l,r,i,c,s=e.state.canvas;n=(a=e.getPos(s)).x,o=a.y,i=parseInt(t.clientX-n),c=parseInt(t.clientY-o),l=parseInt(i-e.startX),r=parseInt(c-e.startY);var d=Object(f.a)(e.state.texts);d[e.selectedText].x+=l,d[e.selectedText].y+=r,e.startX=i,e.startY=c,e.setState({texts:d})},e.handleMouseUp=function(t){t.preventDefault(),e.selectedText=-1},e.handleMouseOut=function(t){t.preventDefault(),e.selectedText=-1},e.componentDidMount=function(){var t=e.state.url,a=document.getElementById("my-canvas"),n=a.getContext("2d"),o=new Image;o.src=t,fetch("https://api.imgflip.com/get_memes").then((function(e){return e.json()})).then((function(t){var l=t.data.memes;e.setState({allMemeImgs:l,image:o,canvas:a,context:n})})).then((function(){a.onmousedown=function(t){t.preventDefault(),e.handleMouseDown(t)},a.onmousemove=function(t){t.preventDefault(),-1!==e.selectedText&&e.handleMouseMove(t)},a.onmouseup=function(t){t.preventDefault(),e.handleMouseUp(t)},a.onmouseout=function(t){t.preventDefault(),e.handleMouseOut(t)}}))},e.componentDidUpdate=function(){e.setImage()},e.setImage=function(){var t=e.state,a=t.image,n=t.texts,o=t.height,l=t.width,r=t.url,i=t.maxHeight,c=document.getElementById("my-canvas"),s=c.getContext("2d");a.src=r,a.crossOrigin="anonymous";var d=M(l,o,i),m=d.newheight,u=d.newwidth;a.onload=function(){c.height=m,c.width=u,s.drawImage(a,0,0,l,o,0,0,u,m);for(var e=0;e<n.length;e++){var t=n[e],r=t.text,i=t.color,d=t.borderColor,h=t.x,g=t.y,v=t.size;s.font="".concat(v,"px impact, sans-serif"),s.strokeStyle=d,s.strokeText(r,h,g),s.fillStyle=i,s.fillText(r,h,g)}}},e.handleColorChange=function(t,a){var n=a.target,o=n.name,l=n.value;setTimeout((function(){Object(f.a)(e.state.texts)[t].color=l,e.setState(Object(v.a)({},o,l))}),250)},e.handleBorderColorChange=function(t,a){var n=a.target,o=n.name,l=n.value;setTimeout((function(){Object(f.a)(e.state.texts)[t].borderColor=l,e.setState(Object(v.a)({},o,l))}),250)},e.handleChange=function(t,a,n){var o=document.getElementById("my-canvas").getContext("2d"),l=a.target.value;console.log(e.state.texts,l);var r=Object(f.a)(e.state.texts);switch(n){case"text":o.font="".concat(r[t].size,"px impact, sans-serif"),r[t].text=l;break;case"size":o.font="".concat(l,"px impact, sans-serif"),r[t].size=l}var i=o.measureText(r[t].text);console.log(o.measureText(l)),r[t].width=i.width,r[t].height=i.actualBoundingBoxAscent+i.actualBoundingBoxDescent,e.setState({texts:r})},e.handleTextChange=function(t,a){a.preventDefault();e.handleChange(t,a,"text")},e.handleTextSizeChange=function(t,a){a.preventDefault(),e.handleChange(t,a,"size")},e.handleAddText=function(t){t.preventDefault();var a=Object(f.a)(e.state.texts);a.push({id:a.length,text:"",color:"#000000",borderColor:"#FFFFFF",x:50,y:50,height:null,width:null,size:30}),e.setState({texts:a})},e.handleRemoveText=function(t){t.preventDefault();var a=e.state.texts.slice(0,-1);e.setState({texts:a})},e.handleRandomMemeClick=function(t){t.preventDefault();var a=Math.floor(Math.random()*e.state.allMemeImgs.length),n=e.state.allMemeImgs[a],o=n.url,l=n.width,r=n.height;e.setState({url:o,width:l,height:r,updateImage:!0})},e.handleFileChange=function(t){var a=Object(b.a)(e),n=window.URL.createObjectURL(t.target.files[0]),o=new Image;o.onload=function(){var e=M(this.width,this.height),t=e.newheight,o=e.newwidth;a.setState({url:n,width:o,height:t,updateImage:!0})},o.src=n},e.state={texts:[{id:0,text:"",color:"#000000",borderColor:"#FFFFFF",height:null,width:null,size:30,x:250,y:50},{id:1,text:"",color:"#000000",borderColor:"#FFFFFF",height:null,width:null,size:30,x:250,y:300}],context:void 0,canvas:void 0,topText:"",bottomText:"",bottomColor:"#000000",bottomBorderColor:"#FFFFFF",height:335,width:568,url:"http://i.imgflip.com/1bij.jpg",allMemeImgs:[],image:void 0,maxHeight:Math.floor(.8*window.innerHeight),updateImage:!1,selectedText:-1},e.selectedText=-1,e.startX=void 0,e.startY=void 0,e}return Object(x.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"memeRoot"},o.a.createElement(F,{state:this.state,handleRandomMemeClick:this.handleRandomMemeClick,handleTextChange:this.handleTextChange,handleColorChange:this.handleColorChange,handleBorderColorChange:this.handleBorderColorChange,handleFileChange:this.handleFileChange,handleAddText:this.handleAddText,handleRemoveText:this.handleRemoveText,handleTextSizeChange:this.handleTextSizeChange}),o.a.createElement(k,null))}}]),a}(n.Component),j=a(32),S=a(0);var D=function(){return o.a.createElement("div",{id:"footer"},o.a.createElement("div",{id:"left"},o.a.createElement("a",{href:"https://twitter.com/jai_dewani"},o.a.createElement(S.IconContext.Provider,{value:{color:"rgb(29, 161, 242)"}},o.a.createElement("div",null,o.a.createElement(j.b,null))))),o.a.createElement("div",{id:"middle"},"Made with ",o.a.createElement("span",{role:"img","aria-label":"Red Heart"},"\u2764\ufe0f")," by ",o.a.createElement("a",{href:"https://github.com/jai-dewani"},"Jai Kumar Dewani")),o.a.createElement("div",{id:"right"},o.a.createElement("a",{href:"https://github.com/jai-dewani/memeify"},o.a.createElement(S.IconContext.Provider,{value:{color:"black"}},o.a.createElement("div",null,o.a.createElement(j.a,null))))))};a(56);var N=function(){return o.a.createElement("div",{className:"app-container","data-theme":"dark"},o.a.createElement(g,null),o.a.createElement(I,null),o.a.createElement(D,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.9bc3a970.chunk.js.map