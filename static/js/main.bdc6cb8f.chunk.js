(this.webpackJsonpmemeapp=this.webpackJsonpmemeapp||[]).push([[0],{55:function(e,t,a){e.exports=a(71)},60:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),o=a(16),r=a.n(o),i=(a(60),a(30)),c=a(94),d=a(100),m=a(96),h=a(97),s=a(99),u=Object(c.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,color:"white"}}}));var g=function(){var e=u(),t=Object(n.useState)(!1),a=Object(i.a)(t,2),o=a[0],r=a[1];return l.a.createElement(d.a,{position:"static",className:"inverted-theme"},l.a.createElement(m.a,null,l.a.createElement(s.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"}),l.a.createElement(h.a,{variant:"h6",className:e.title},l.a.createElement("img",{className:"inverted inverted-theme",src:"https://upload.wikimedia.org/wikipedia/en/9/9a/Trollface_non-free.png",alt:"Problem?",height:"50px",width:"50px"})),l.a.createElement(h.a,{variant:"h5",className:e.title},l.a.createElement("p",null,"Memeify")),l.a.createElement(h.a,{variant:"h6"},l.a.createElement("label",{className:"theme-switch",htmlFor:"checkbox"},l.a.createElement("input",{type:"checkbox",id:"checkbox",onChange:function(e){var t=document.querySelectorAll(".inverted");document.body.classList.toggle("inverted-theme"),t.forEach((function(e){return e.classList.toggle("inverted-theme")})),r(!o)}}),l.a.createElement("div",{className:"slider round"})))))},f=a(9),v=a(26),p=a(4),b=a(5),E=a(17),C=a(7),x=a(6),w=a(36),k=a(25),j=function(e){var t=e.shapeProps,a=e.isSelected,n=e.onSelect,o=e.onChange,r=l.a.useRef(),i=l.a.useRef();return l.a.useEffect((function(){a&&(i.current.nodes([r.current]),i.current.getLayer().batchDraw())}),[a]),l.a.createElement(l.a.Fragment,null,l.a.createElement(k.d,Object.assign({onClick:n,onTap:n,ref:r},t,{draggable:!0,fillAfterStrokeEnabled:!0,strokeScaleEnabled:!1,onDragEnd:function(e){o(Object(w.a)(Object(w.a)({},t),{},{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var a=r.current,n=a.fontSize();o(Object(w.a)(Object(w.a)({},t),{},{x:a.x(),y:a.y(),fontSize:n}))}})),a&&l.a.createElement(k.e,{ref:i,boundBoxFunc:function(e,t){return t.width<5||t.height<5?e:t}}))},y=a(98),S=a(43);var T=function(e){var t=this,a=e.state.texts;return l.a.createElement("form",{className:"meme-form",onSubmit:e.handleSubmit},a.map((function(a){return l.a.createElement("div",{key:10*a.id},l.a.createElement("input",{className:"input",key:a.id,type:"text",name:a.text,placeholder:"Funny text goes here....",value:a.text,onChange:e.handleChange.bind(t,a.id,"text")}),l.a.createElement(y.a,{title:"Text Color",placement:"top-start",arrow:!0},l.a.createElement("input",{className:"colorPicker inverted",type:"color",name:"bottomColor",value:a.fill,onChange:e.handleColorChange.bind(t,a.id)})),l.a.createElement(y.a,{title:"Border Color",placement:"top-start",arrow:!0},l.a.createElement("input",{className:"colorPicker inverted",type:"color",name:"bottomBorderColor",value:a.stroke,onChange:e.handleBorderColorChange.bind(t,a.id)})))})),l.a.createElement("div",{className:"input-control"},l.a.createElement("button",{id:"remove ",className:"inverted button",onClick:e.handleRemoveText},"-"),l.a.createElement("button",{id:"add",className:"inverted button",onClick:e.handleAddText},"+")),l.a.createElement("button",{type:"submit",onClick:e.handleRandomMemeClick,className:"inverted button"},l.a.createElement(S.MdShuffle,null)," Random"),l.a.createElement("button",{type:"submit",onClick:e.handleDownloadClick,className:"inverted button"},l.a.createElement(S.MdFileDownload,null)," download"),l.a.createElement("button",{className:"cutom-file-upload inverted button",type:"button",onClick:function(){document.getElementById("file-upload").click()}}," ",l.a.createElement(S.MdFileUpload,null)," Upload"),l.a.createElement("input",{id:"file-upload",type:"file",onChange:e.handleFileChange}))},O=function(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),o=a[0],r=a[1],c=Object(n.useRef)(null),d=Object(n.useRef)(null),m=function(e){e.target===e.target.getStage()&&r(null)};return l.a.createElement("div",{className:"memeRoot"},l.a.createElement(T,{state:e.state,handleRandomMemeClick:e.handleRandomMemeClick,handleChange:e.handleChange,handleColorChange:e.handleColorChange,handleBorderColorChange:e.handleBorderColorChange,handleFileChange:e.handleFileChange,handleAddText:e.handleAddText,handleRemoveText:e.handleRemoveText,handleTextSizeChange:e.handleTextSizeChange,handleDownloadClick:function(e){e.preventDefault();var t=d.current.toDataURL(),a=document.createElement("a");a.download="meme.png",a.href=t,a.click()}}),l.a.createElement("div",{className:"canvas inverted"},l.a.createElement(k.c,{width:e.imageData.width,height:e.imageData.height,onMouseDown:m,onTouchStart:m,ref:d,onContentMouseover:!0},l.a.createElement(k.b,{ref:c},console.log("a"),l.a.createElement(k.a,{x:0,y:0,image:e.imageData.object}),e.texts.map((function(t,a){return l.a.createElement(j,{key:a,shapeProps:t,isSelected:t.id===o,onSelect:function(){return r(t.id)},onChange:function(t){var n=e.texts.slice();n[a]=t,e.setText(n)}})}))))))},D=function(e,t,a){var n=t,l=e;t>a&&(l=e*(a/t),n=a);return{newHeight:n,newWidth:l}},F=function(e){Object(C.a)(a,e);var t=Object(x.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.state.imageData,a=new Image;a.src=t.url,a.crossOrigin="anonymous",fetch("https://api.imgflip.com/get_memes").then((function(e){return e.json()})).then((function(n){var l=n.data.memes;t.object=a,e.setState({allMemeImgs:l,imageData:t})}))},e.handleColorChange=function(t,a){var n=a.target,l=n.name,o=n.value;setTimeout((function(){Object(v.a)(e.state.texts)[t].fill=o,e.setState(Object(f.a)({},l,o))}),250)},e.handleBorderColorChange=function(t,a){var n=a.target,l=n.name,o=n.value;setTimeout((function(){Object(v.a)(e.state.texts)[t].stroke=o,e.setState(Object(f.a)({},l,o))}),250)},e.handleChange=function(t,a,n){console.log(t),console.log(n),console.log(a);var l=n.target.value,o=Object(v.a)(e.state.texts);switch(a){case"text":console.log(o,l),o[t].text=l;break;case"strokeWidth":o[t].strokeWidth=l}e.setText(o)},e.setText=function(t){return e.setState(t)},e.handleAddText=function(t){t.preventDefault();var a=Object(v.a)(e.state.texts);a.push({id:a.length,text:"",fill:"#000000",stroke:"#FFFFFF",x:50,y:50,fontSize:30,strokeWidth:1}),e.setState({texts:a})},e.handleRemoveText=function(t){t.preventDefault();var a=e.state.texts.slice(0,-1);e.setState({texts:a})},e.handleRandomMemeClick=function(t){t.preventDefault();var a=Math.floor(Math.random()*e.state.allMemeImgs.length),n=e.state.allMemeImgs[a],l=n.url,o=n.width,r=n.height,i=e.state.imageData,c=D(o,r,e.state.imageData.maxHeight),d=c.newHeight,m=c.newWidth;console.log(o,r),console.log(m,d);var h=new Image;h.crossOrigin="Anonymous",h.height=i.height=d,h.width=i.width=m,h.src=i.url=l,i.updateImage=!0,i.object=h,h.onload=function(){return e.setState({imageData:i})}},e.handleFileChange=function(t){var a=Object(E.a)(e),n=window.URL.createObjectURL(t.target.files[0]),l=new Image;l.onload=function(){var e=D(this.width,this.height),t=e.newheight,l=e.newwidth;a.setState({url:n,width:l,height:t,updateImage:!0})},l.src=n},e.handleExport=function(e){var t=e.current.toDataURL(),a=document.createElement("a");a.download="meme.png",a.href=t,a.click()},e.state={texts:[{id:0,text:"",fill:"#000000",stroke:"#FFFFFF",strokeWidth:1,fontSize:30,x:250,y:50}],allMemeImgs:[],imageData:{height:335,width:568,url:"http://i.imgflip.com/1bij.jpg",maxHeight:Math.floor(.7*window.innerHeight),object:null},updateImage:!1},e}return Object(b.a)(a,[{key:"render",value:function(){return l.a.createElement(O,{state:this.state,handleRandomMemeClick:this.handleRandomMemeClick,handleChange:this.handleChange,handleColorChange:this.handleColorChange,handleBorderColorChange:this.handleBorderColorChange,handleFileChange:this.handleFileChange,handleAddText:this.handleAddText,handleRemoveText:this.handleRemoveText,handleTextSizeChange:this.handleTextSizeChange,imageData:this.state.imageData,texts:this.state.texts,handleExport:this.handleExport,setImage:this.setImage,setText:this.setText})}}]),a}(n.Component),R=a(46),M=a(0);var N=function(){return l.a.createElement("div",{id:"footer"},l.a.createElement("div",{id:"left"},l.a.createElement("a",{href:"https://twitter.com/jai_dewani"},l.a.createElement(M.IconContext.Provider,{value:{color:"rgb(29, 161, 242)"}},l.a.createElement("div",null,l.a.createElement(R.b,null))))),l.a.createElement("div",{id:"middle"},"Made with ",l.a.createElement("span",{role:"img","aria-label":"Red Heart"},"\u2764\ufe0f")," by ",l.a.createElement("a",{href:"https://github.com/jai-dewani"},"Jai Kumar Dewani")),l.a.createElement("div",{id:"right"},l.a.createElement("a",{href:"https://github.com/jai-dewani/memeify"},l.a.createElement(M.IconContext.Provider,{value:{color:"black"}},l.a.createElement("div",null,l.a.createElement(R.a,null))))))};a(70);var I=function(){return l.a.createElement("div",{className:"app-container","data-theme":"dark"},l.a.createElement(g,null),l.a.createElement(F,null),l.a.createElement(N,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[55,1,2]]]);
//# sourceMappingURL=main.bdc6cb8f.chunk.js.map